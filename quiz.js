var uniOuluquiz = [
  {
    question: "Viime aikoina on keskusteltu kiivaasti siitä, pitäisikö yliopiston muuttaa. Minne yliopiston mahdollisia uusia tiloja on suunniteltu?",
    answers: {
      a: 'Nallikariin meren rantaan',
      b: 'Raksilaan keskustan tuntumaan',
      c: 'Oulunsaloon lentokentän viereen'
    },
    correctAnswer: 'b'
  }
];

var paskaKaupunniquiz = [  
  {
    question: "Minkä värinen Paska Kaupunni teksti on?",
    answers: {
      a: 'Musta',
      b: 'Pinkki',
      c: 'Vihreä'
    },
    correctAnswer: 'a'
  }
];

var kaijonHarjuquiz = [
  {
    question: "Apinatalo on saanut nimensä lukevaa orankia esittävästä patsaasta. Mikä on patsaan virallinen nimi?",
    answers: {
      a: 'Tiedonjano',
      b: 'Viisas apina',
      c: 'Apinapatsas'
    },
    correctAnswer: 'a'
  }
];

toriPoliisiquiz = [
  {
    question: "Miten Toripolliisin pystyttäminen rahoitettiin aikanaan?",
    answers: {
      a: 'Lahjoitus Helsingin kaupungilta',
      b: 'Kaupunki budjetoi patsaan pystyttämisen',
      c: 'Kansalaiskeräyksellä ja oheistuotteiden myynnillä'
    },
    correctAnswer: 'c'
  }
];

prismaquiz = [
  {
    question: "Mitä Prisman parkkipaikalla ei saa tehdä öiseen aikaan?",
    answers: {
      a: 'Ajaa',
      b: 'Korjata autoa',
      c: 'Pysäköidä'
    },
    correctAnswer: 'c'
  }
];

valkeaquiz = [
  {
    question: "Mitä on Valkean yläkerroksissa?",
    answers: {
      a: 'Yökerho',
      b: 'Asuntoja',
      c: 'Toimistoja'
    },
    correctAnswer: 'b'
  }
];

kauppaToriquiz = [
  {
    question: "Oulun kaupunginteatterin ja kaupunginkirjaston välistä lähtee silta Pikisaareen. Minkä killan kiltatalo sijaitsee Pikisaaressa?",
    answers: {
      a: 'Syntaksis (biologian opiskelijat)',
      b: 'Blanko (tietojenkäsittelytieteen opiskelijat)',
      c: 'Arkkitehtikilta'
    },
    correctAnswer: 'c'
  }
];

teekkariTaloquiz = [
  {
    question: "Ketkä keksivät ajatuksen teekkaritalosta ja missä?",
    answers: {
      a: 'Teekkarikiltojen puheenjohtajat saunassa',
      b: 'Yliopiston professorit pikkujouluissa',
      c: 'Entiset yliopiston oppilaat lounaalla'
    },
    correctAnswer: 'a'
  }
];

rotuaariquiz = [
  {
    question: "Mistä Rotuaarin nimi tulee?",
    answers: {
      a: 'Ranskan sanasta trottoir',
      b: 'Ruotsin sanoista tro ja toa',
      c: 'Rotuaarin pallosta'
    },
    correctAnswer: 'a'
  }
];

oamkquiz = [
  {
    question: "Missä kaupungissa sijaitsee Suomen suurin korkeakoulujen sisäkampus?",
    answers: {
      a: 'Jyväskylässä',
      b: 'Oulussa',
      c: 'Espoossa'
    },
    correctAnswer: 'b'
  }
]
;

var uniOuluquizeng = [
  {
    question: "Lately there has been a heated discussion on whether the university of Oulu should move away from Linnanmaa at least partially. Where have they been considering moving the campus?",
    answers: {
      a: 'To Nallikari close to the beach',
      b: 'To Raksila close to the city center',
      c: 'To Oulunsalo close to the airport'
    },
    correctAnswer: 'b'
  }
];

var paskaKaupunniquizeng = [
  {
    question: "What colour is the Paska Kaupunni tag?",
    answers: {
      a: 'Black',
      b: 'Pink',
      c: 'Green'
    },
    correctAnswer: 'a'
  }
];

var kaijonHarjuquizeng = [  
  {
    question: "Apinatalo is named after a statue of a reading orangutan. What is the official name of the statue?",
    answers: {
      a: 'Thirst for knowledge',
      b: 'The Wise Monkey',
      c: 'Monkey Statue'
    },
    correctAnswer: 'a'
   
    }
  ]
;

toriPoliisiquizeng = [
  {
    question: "How was the bobby statue in the marketplace funded?",
    answers: {
      a: 'The city of Helsinki paid for it.',
      b: 'The city of Oulu included it into the annual budget',
      c: 'By collecting donations and selling bobby themed products'
    },
    correctAnswer: 'c'
  }
];

prismaquizeng = [
  {
    question: "What is not allowed in the Prisma parking lot at night?",
    answers: {
      a: 'Driving',
      b: 'Fixing a car',
      c: 'Parking'
    },
    correctAnswer: 'c'
  }
];

valkeaquizeng = [
  {
    question: "What can you find on the upper floors of Valkea building?",
    answers: {
      a: 'A Nightclub',
      b: 'Apartments',
      c: 'Offices'
    },
    correctAnswer: 'b'
  }
]
;

kauppaToriquizeng = [
  {
    question: "A bridge connects the island with the city theatre and the main library to another island called Pikisaari (“Pitch island”). Which student guild owns a guildhouse in Pikisaari? ",
    answers: {
      a: 'Syntaksis (Biology students)',
      b: 'Blanko (Information processing science students)',
      c: 'Architect guild'
    },
    correctAnswer: 'c'
  }
];

teekkariTaloquizeng = [
  {
    question: "Who came up with the idea of Teekkaritalo and where?",
    answers: {
      a: 'Chairpersons of engineering guilds in a sauna',
      b: 'University professors in a Christmas party ',
      c: 'Alumni students at lunch'
    },
    correctAnswer: 'a'
  }
];

rotuaariquizeng = [
  {
    question: "Where does the name of pedestrian street Rotuaari come from?",
    answers: {
      a: 'From French “trottoir”',
      b: 'From Swedish “tro” and “toa” ',
      c: 'From the ball of Rotuaari'
    },
    correctAnswer: 'a'
  }
];

oamkquizeng = [
  {
    question: "Which city has the largest indoor university campus in Finland?",
    answers: {
      a: 'Jyväskylä',
      b: 'Oulu',
      c: 'Espoo'
    },
    correctAnswer: 'b'
  }
];

function quiz(x) {
    var modal = document.getElementById("myModal");
    var span = document.getElementsByClassName("close")[0];
    modal.style.display = "block";
    span.onclick = function() {
      modal.style.display = "none";
    }
    window.onclick = function(event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    }

    if (x==1){
      x = document.getElementById("instructions");
      x.style.display = "block";

      x = document.getElementById("instructions");
      x.innerText = "Visassa on yksi kysymys jokaisesta sovelluksessa esitellystä paikasta. Voit tutustua kohteisiin ennen visan tekemistä tai kokeilla onneasi. Kohteiden esittelyt eivät kerro suoraan oikeita vastauksia visaan, mutta niistä voi olla apua.\n\nTäysillä pisteillä suoritetusta visasta voit saada fuksipisteitä. Koska uskomme oppimisen voimaan, saa visan tehdä niin monta kertaa kuin haluat. Visa ei kuitenkaan suoraan paljasta oikeita vastauksia. Tutorisi kirjaa fuksipisteesi ylös, kun lähetät hänelle ruutukaappauksen tuloksestasi.";


      x = document.getElementById("modhead");
        x.innerText = "Kerää fuksipisteitä visan avulla!";
        var allQuestions = [];
        allQuestions = allQuestions.concat(uniOuluquiz, kaijonHarjuquiz, paskaKaupunniquiz, toriPoliisiquiz, prismaquiz,
        valkeaquiz, kauppaToriquiz, teekkariTaloquiz, rotuaariquiz, oamkquiz);

        generateQuiz(allQuestions);
    }

    else if (x==2){
      x = document.getElementById("instructions");
      x.style.display = "block";

      x = document.getElementById("instructions");
      x.innerText = "There is one question about each location that is introduced. You may get to know the locations better before taking the quiz or try your luck. The introductions you find in this app, won’t tell you the correct answers, but they may still be helpful.\n\n\nIf you complete the quiz with the perfect score, you can get freshman points. Since we believe in the power of learning, you may take the quiz as many times as you wish. However, the quiz will not show you the correct answer if you picked the wrong one. Your tutor student will grant you your freshman points when you send them a screenshot of your perfect score.";

      x = document.getElementById("modhead");
        x.innerText = "Collect freshman points by taking this quiz!";
        var allQuestions = [];
        allQuestions = allQuestions.concat(uniOuluquizeng, kaijonHarjuquizeng, paskaKaupunniquizeng, toriPoliisiquizeng, prismaquizeng,
        valkeaquizeng, kauppaToriquizeng, teekkariTaloquizeng, rotuaariquizeng, oamkquizeng);

        generateQuiz(allQuestions);

    }
    else{

      x = document.getElementById("instructions");
      x.style.display = "none";

      info = infowindow.getContent();
    
      if (info.includes('<h3 id="firstHeading" class="firstHeading">Oulun Yliopisto</h3>')) {
        x = document.getElementById("modhead");
        x.innerText = "Visakysymys Oulun Yliopistosta";
        generateQuiz(uniOuluquiz);
      }
    
      else if (info.includes('<h3 id="firstHeading" class="firstHeading">Kaijonharju</h3>')) {
        x = document.getElementById("modhead");
        x.innerText = "Visakysymys Kaijonharjusta";  
        generateQuiz(kaijonHarjuquiz);
      }
    
      else if (info.includes('<h3 id="firstHeading" class="firstHeading">Paskakaupunni</h3>')) {
        x = document.getElementById("modhead");
        x.innerText = "Visakysymys Paskakaupunnista";  
        generateQuiz(paskaKaupunniquiz);
      }
    
      else if (info.includes('<h3 id="firstHeading" class="firstHeading">Toripoliisi</h3>')) {
        x = document.getElementById("modhead");
        x.innerText = "Visakysymys Toripoliisista";
        generateQuiz(toriPoliisiquiz);
      }
    
      else if (info.includes('<h3 id="firstHeading" class="firstHeading">Prisma</h3>')) {
        x = document.getElementById("modhead");
        x.innerText = "Visakysymys Prismasta";  
        generateQuiz(prismaquiz);
      }
    
      else if (info.includes('<h3 id="firstHeading" class="firstHeading">Valkea</h3>')) {
        x = document.getElementById("modhead");
        x.innerText = "Visakysymys Valkeasta";  
        generateQuiz(valkeaquiz);
      }
    
      else if (info.includes('<h3 id="firstHeading" class="firstHeading">Kauppatori</h3>')) {
        x = document.getElementById("modhead");
        x.innerText = "Visakysymys Kauppatorista";  
        generateQuiz(kauppaToriquiz);
      }
    
      else if (info.includes('<h3 id="firstHeading" class="firstHeading">Teekkaritalo</h3>')) {
        x = document.getElementById("modhead");
        x.innerText = "Visakysymys Teekkaritalosta";  
        generateQuiz(teekkariTaloquiz);
      }
    
      else if (info.includes('<h3 id="firstHeading" class="firstHeading">Rotuaari</h3>')) {
        x = document.getElementById("modhead");
        x.innerText = "Visakysymys Rotuaarista";  
        generateQuiz(rotuaariquiz);
      }
    
      else if (info.includes('<h3 id="firstHeading" class="firstHeading">OAMK</h3>')) {
        x = document.getElementById("modhead");
        x.innerText = "Visakysymys OAMK:sta";  
        generateQuiz(oamkquiz);
      }

      else if (info.includes('<h3 id="firstHeading" class="firstHeadingeng">Oulun Yliopisto</h3>')) {
        x = document.getElementById("modhead");
        x.innerText = "University of Oulu quiz question";
        generateQuiz(uniOuluquizeng);
      }
    
      else if (info.includes('<h3 id="firstHeading" class="firstHeadingeng">Kaijonharju</h3>')) {
        x = document.getElementById("modhead");
        x.innerText = "Kaijonharju quiz question";  
        generateQuiz(kaijonHarjuquizeng);
      }
    
      else if (info.includes('<h3 id="firstHeading" class="firstHeadingeng">Paskakaupunni</h3>')) {
        x = document.getElementById("modhead");
        x.innerText = "Paskakaupunni quiz question";  
        generateQuiz(paskaKaupunniquizeng);
      }
    
      else if (info.includes('<h3 id="firstHeading" class="firstHeadingeng">Toripoliisi</h3>')) {
        x = document.getElementById("modhead");
        x.innerText = "Toripoliisi quiz question";
        generateQuiz(toriPoliisiquizeng);
      }
    
      else if (info.includes('<h3 id="firstHeading" class="firstHeadingeng">Prisma</h3>')) {
        x = document.getElementById("modhead");
        x.innerText = "Prisma quiz question";  
        generateQuiz(prismaquizeng);
      }
    
      else if (info.includes('<h3 id="firstHeading" class="firstHeadingeng">Valkea</h3>')) {
        x = document.getElementById("modhead");
        x.innerText = "Valkea quiz question";  
        generateQuiz(valkeaquizeng);
      }
    
      else if (info.includes('<h3 id="firstHeading" class="firstHeadingeng">Kauppatori</h3>')) {
        x = document.getElementById("modhead");
        x.innerText = "Kauppatori quiz question";  
        generateQuiz(kauppaToriquizeng);
      }
    
      else if (info.includes('<h3 id="firstHeading" class="firstHeadingeng">Teekkaritalo</h3>')) {
        x = document.getElementById("modhead");
        x.innerText = "Teekkaritalo quiz question";  
        generateQuiz(teekkariTaloquizeng);
      }
    
      else if (info.includes('<h3 id="firstHeading" class="firstHeadingeng">Rotuaari</h3>')) {
        x = document.getElementById("modhead");
        x.innerText = "Rotuaari quiz question";  
        generateQuiz(rotuaariquizeng);
      }
    
      else if (info.includes('<h3 id="firstHeading" class="firstHeadingeng">OAMK</h3>')) {
        x = document.getElementById("modhead");
        x.innerText = "Oulu University of Applied Sciences quiz question";  
        generateQuiz(oamkquizeng);
      }
    }  
}
  
  
function generateQuiz(questions, answered){
  
  var quizContainer = document.getElementById('quiz');
  var resultsContainer = document.getElementById('results');
  var submitButton = document.getElementById('vastausbtn');
  var submitButton2 = document.getElementById('vastausbtneng');
  showQuestions(questions, quizContainer);
  showAvailablePoints(questions, resultsContainer);
  
  function showQuestions(questions, quizContainer){
    var output = [];
    var answers;
  
    for(var i=0; i<questions.length; i++){
        
      answers = [];
  
      for(letter in questions[i].answers){
        answers.push(
          '<label>'	+ '<input type="radio" class="quizChoosebtn" name="question'+i+'" value="'+letter+'">'
          + letter + ': ' + questions[i].answers[letter] + "<br>" + '</label>');
      }
      output.push(
        '<div class="question">' + questions[i].question + '</div>'
        + '<div class="answers">' + answers.join('') + "<br>" + '</div>');
    }
    quizContainer.innerHTML = output.join('');
  }
      
  function showResults(questions, quizContainer, resultsContainer){
    var answerContainers = quizContainer.querySelectorAll('.answers');
    var userAnswer = '';
    var numCorrect = 0;
      
    for(var i=0; i<questions.length; i++){
      userAnswer = (answerContainers[i].querySelector('input[name=question'+i+']:checked')||{}).value;
        
      if(userAnswer===questions[i].correctAnswer){
        numCorrect++;
        answerContainers[i].style.color = 'green';
      }
        
      else{
        answerContainers[i].style.color = 'red';
      }
    }
    resultsContainer.innerHTML = numCorrect + '/' + questions.length;
  }

  function showAvailablePoints(questions, resultsContainer){
    resultsContainer.innerHTML = "";
  }
 
  showQuestions(questions, quizContainer);
  
  submitButton.onclick = function(){
    showResults(questions, quizContainer, resultsContainer);
  }
  submitButton2.onclick = function(){
    showResults(questions, quizContainer, resultsContainer);
  }
}